{% extends "base_generic.html" %}

{% block content %}
    <h1>{{ entitywork.name }} -
    {% for relation in entitywork.relationorganitywork_set.all %}
            {% if relation.highlighted_relation == 1 %}
                <a href="{% url 'organities-detail' relation.entity_a.pk %}">{{relation.entity_a.name}}</a>
            {% endif %}
        {% endfor %}
    </h1>

    <p>Date: {{ entitywork.start_date }}</p>

    <div style="margin-left:20px;margin-top:20px">
        <p></p>
    </div>

    <hr>

    <!-- display credits -->
    <div style="margin-left:20px;margin-top:20px">
        <h4>Credits</h4>
            <ul>
                {% for relation in entitywork.relationorganitywork_set.all %}
                    <li>
                        {{relation.display_relation_name}}
                        <a href="{% url 'organities-detail' relation.entity_a.pk %}">
                            {{relation.entity_a.name}}
                        </a>
                    </li>
                {% endfor %}
            </ul>
    </div>

    <!-- display productions -->
    <div style="margin-left:20px;margin-top:20px">
        <h4>Productions</h4>
            <ul>
                {% for relation in entitywork.relationproductionwork_set.all %}
                    <li>
                        {% for reltype in relation.relation_type.all %}{{ reltype.inverted_name }}{% endfor %}
                        <a href="{% url 'productions-detail' relation.entity_a.pk %}">
                            {{relation.entity_a.name}}
                        </a>
                    </li>
                {% endfor %}
            </ul>
    </div>

    <hr>
    <div style="margin-left:20px;margin-top:20px">
        <h4>Available edit actions</h4>
        <ul>
            {% if perms.catalog.can_edit_entity_work %}<li><a href="{% url 'work_update' entitywork.id %}">Update this work</a></li>{% endif %}
            {% if perms.catalog.can_delete_entity_work %}<li><a href="{% url 'work_delete' entitywork.id %}">Delete this work</a></li>{% endif %}
            {% if perms.catalog.can_add_relation_work_organity %}<li><a href="{% url 'work_organity_create' entitywork.id %}">Relate an organity to this work</a></li>{% endif %}
            {% if perms.catalog.can_add_relation_work_work %}<li><a href="{% url 'work_work_create' entitywork.id %}">Relate a work to this work</a></li>{% endif %}
            {% if perms.catalog.can_add_relation_work_character %}<li><a href="{% url 'work_character_create' entitywork.id %}">Relate a character to this work</a></li>{% endif %}
            {% if perms.catalog.can_add_relation_work_genre %}<li><a href="{% url 'work_genre_create' entitywork.id %}">Relate a genre to this work</a></li>{% endif %}
            {% if perms.catalog.can_add_relation_work_url %}<li><a href="{% url 'work_url_create' entitywork.id %}">Relate a url to this work</a></li>{% endif %}
        </ul>
    </div>
{% endblock %}
